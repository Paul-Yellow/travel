webpackJsonp([22],{288:function(t,e,i){var s=i(1)(i(289),i(290),!1,null,null,null);t.exports=s.exports},289:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"favourite",props:{item:{type:Object,required:!0},type:{type:String,default:"link"},api:{type:String,default:""}},methods:{onFavourite:function(){var t=this;this.$http.post(this.api,{id:this.item.id}).then(function(e){t.toggleStatus()}).catch(function(e){401===e.response.status?t.$alert("登入之后才能点赞","请先登入",{confirmButtonText:"确定",callback:function(e){t.$router.replace({path:"/login"})}}):t.$message({type:"wran",message:"发生错误，骚后再试"})})},toggleStatus:function(){this.item["has_"+this.type]=!this.item["has_"+this.type]}}}},290:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{on:{click:this.onFavourite}},[e("button",{staticClass:"btn-add-diamond",class:this.item["has_"+this.type]?"remove":"",attrs:{id:"News-11444",title:"加入收藏"}},[this._v("   收藏 ")])])},staticRenderFns:[]}},291:function(t,e,i){var s=i(1)(i(292),i(293),!1,null,null,null);t.exports=s.exports},292:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"links",props:{item:{type:Object,required:!0},type:{type:String,default:"link"},api:{type:String,default:""}},methods:{onFavourite:function(){var t=this;this.$http.post(this.api,{id:this.item.id}).then(function(e){t.toggleStatus()}).catch(function(e){401===e.response.status?t.$alert("登入之后才能点赞","请先登入",{confirmButtonText:"确定",callback:function(e){t.$router.replace({path:"/login"})}}):t.$message({type:"wran",message:"发生错误，骚后再试"})})},toggleStatus:function(){this.item["has_"+this.type]=!this.item["has_"+this.type]}}}},293:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{on:{click:this.onFavourite}},[e("el-popover",{ref:"popover1",attrs:{placement:"top-start",title:"点赞人数",width:"200",trigger:"hover",content:this.item.like_count+"人"}}),this._v(" "),e("button",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],staticClass:"btn-add-diamond-1",class:this.item["has_"+this.type]?"remove":"",attrs:{title:"点赞"}},[this._v(" 点赞 ")])],1)},staticRenderFns:[]}},415:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(86),a=i.n(s),n=i(288),r=i.n(n),o=i(291),l=i.n(o);e.default={name:"neweventlist",components:{Breadcrumb:a.a,Favourite:r.a,Links:l.a},data:function(){return{listLoading:!1,list:null,listQuery:{}}},methods:{handleSizeChange:function(t){this.$router.push({path:"/offers",query:{limit:t}})},handleCurrentChange:function(t){this.$router.push({path:"/offers",query:{page:t}})},fetchList:function(){var t=this;this.listLoading=!0,this.$http.get("/offers?page="+this.currentPage+"&limit="+this.currentLimit).then(function(e){var i=e.data;t.list=i.data,t.listQuery=i.meta.pagination,t.listLoading=!1})}},mounted:function(){this.fetchList()},watch:{currentPage:"fetchList",currentLimit:"fetchList"},computed:{currentPage:function(){return parseInt(this.$route.query.page,10)||1},currentLimit:function(){return parseInt(this.$route.query.limit,10)||10},dataList:function(){return this.list}}}},416:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"unit-title-blk bg-slash"},[i("Breadcrumb",{staticClass:"breadcrumb"}),t._v(" "),i("h2",{staticClass:"unit-title icon-unit-event"},[t._v(t._s(t.$route.name))])],1),t._v(" "),t.listLoading?t._e():i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.listLoading,expression:"listLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"page-content-wrapper"},[i("p",{staticClass:"total-nums-blk"},[t._v(" 共有"),i("span",{staticClass:"nums"},[t._v(t._s(t.listQuery.total))]),t._v("个最新活动")]),t._v(" "),i("ul",{staticClass:"event-news-card-list"},t._l(t.dataList,function(e,s){return i("li",{key:s,staticClass:"item news"},[i("div",{staticClass:"info-card-item"},[i("router-link",{staticClass:"link",attrs:{to:"/offers/detail/"+e.id,title:e.explain}},[i("span",{staticClass:"thumb-frame"},[i("img",{staticClass:"thumb lazyloaded",attrs:{src:e.imgUrl,alt:e.explain}})]),t._v(" "),i("div",{staticClass:"info-blk"},[i("span",{staticClass:"date"},[t._v("活动时间:"+t._s(e.date))]),t._v(" "),i("h3",{staticClass:"info-title"},[t._v(t._s(e.content_short))])])]),t._v(" "),i("div",{staticClass:"func-blk"},[i("span",{staticClass:"icon-view-1"},[t._v("最后编辑时间:"+t._s(e.date_time))]),t._v(" "),i("span",{staticClass:"icon-view"},[t._v(t._s(e.view_count))]),t._v(" "),i("favourite",{attrs:{item:e,type:"favorited",api:"/admin/offers/favourite"}}),t._v(" "),i("links",{attrs:{item:e,type:"liked",api:"/admin/offers/links"}})],1)],1)])})),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":t.listQuery.current_page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.listQuery.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},staticRenderFns:[]}},800:function(t,e,i){var s=i(1)(i(415),i(416),!1,null,null,null);t.exports=s.exports}});