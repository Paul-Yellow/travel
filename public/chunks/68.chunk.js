webpackJsonp([68],{724:function(e,t,r){var a=r(725);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(9)("054838b9",a,!0,{})},725:function(e,t,r){(e.exports=r(5)(!1)).push([e.i,".inline-radio[data-v-0657e983]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-ms-flex-pack:distribute;justify-content:space-around;-webkit-flex-wrap:nowrap;-webkit-justify-content:space-around;-moz-flex-direction:row;-moz-flex-wrap:nowrap;-moz-justify-content:space-around}.inline-radio>p[data-v-0657e983]{padding:0 .6rem}.ul-list[data-v-0657e983]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-moz-flex-direction:row;-moz-flex-wrap:wrap;-moz-justify-content:flex-start;-webkit-flex-wrap:wrap;-webkit-justify-content:flex-start}.ul-list>li[data-v-0657e983]{padding:.6rem}.tags-module[data-v-0657e983]{display:block}.tags[data-v-0657e983]{margin:5px}.rolesinfo[data-v-0657e983]{padding:1rem}.rolesinfo>li[data-v-0657e983]{padding:.8rem;border-bottom:1px solid #ccc}.rolesinfo>li>span[data-v-0657e983]{margin-right:.6rem}",""])},726:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"usercreate",data:function(){return{rolesData:[],permissionsData:[],showData:{},dialogVisible:!1,ruleForm:{email:"",sex:"",username:"",iphone:"",permissions:[],roles:1},rules:{email:[{required:!0,message:"请输入正确的账户名，账户名不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],username:[{required:!0,message:"请输入你的姓名",trigger:"blur"},{min:2,max:6,message:"长度在3到6个字符之间",trigger:"blur,change"}],iphone:[{required:!0,message:"请输入你的手机号码",trigger:"blur"},{min:11,max:12,message:"长度在11到12个字符之间",trigger:"blur,change"}]}}},methods:{submitForm:function(e){var t=this,r=this.ruleForm;this.$refs[e].validate(function(e){e&&t.$http.put("/admin/users/"+t.$route.params.id,r).then(function(e){if(200===e.status&&200===e.data.responData.status)return t.$message({type:"success",message:e.data.responData.messages}),t.$router.go(-1)})})},fetchData:function(e){var t=this;this.$http.get("/admin/users/"+e+"/edit").then(function(e){var r=e.data;r.roles.length>0&&r.permissions.length>0?(t.rolesData=r.roles,t.permissionsData=r.permissions,t.ruleForm.sex=r.responData.user.data.sex,t.ruleForm.username=r.responData.user.data.name,t.ruleForm.iphone=r.responData.user.data.iphone,t.ruleForm.email=r.responData.user.data.email,t.ruleForm.roles=r.responData.rolesId[0]):t.$message({type:"error",message:"空的数据"})})},onShowPermission:function(e){var t=this;this.$http.get("/admin/role/"+e).then(function(e){200===e.status&&e.data&&(t.dialogVisible=!0,t.showData=e.data.responData.results)})}},created:function(){this.fetchData(this.$route.params.id)}}},727:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("el-form",{ref:"ruleForm",staticClass:"signup",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"email",label:"邮箱:"}},[r("el-input",{attrs:{type:"email",placeholder:"邮箱作为以后找会密码的依据"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},[r("el-radio",{attrs:{label:"先生",name:"sex"}}),e._v(" "),r("el-radio",{attrs:{label:"女士",name:"sex"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"角色",prop:"roles"}},[r("el-radio-group",{staticClass:"inline-radio",model:{value:e.ruleForm.roles,callback:function(t){e.$set(e.ruleForm,"roles",t)},expression:"ruleForm.roles"}},e._l(e.rolesData,function(t,a){return r("p",{key:a},[r("el-radio",{attrs:{label:t.id,name:"roles"}},[e._v(e._s(t.name))]),e._v(" "),r("el-tag",{staticStyle:{cursor:"pointer"},nativeOn:{click:function(r){e.onShowPermission(t.id)}}},[e._v("查看权限")])],1)}))],1),e._v(" "),r("el-form-item",{attrs:{label:"角色权限",prop:"permissions"}},[r("p",[e._v("为用户添加额外的权限;")]),e._v(" "),r("el-checkbox-group",{staticStyle:{border:"1px solid #eee","border-radius":"4px",padding:".8rem"},model:{value:e.ruleForm.permissions,callback:function(t){e.$set(e.ruleForm,"permissions",t)},expression:"ruleForm.permissions"}},[r("ul",{staticClass:"ul-list"},e._l(e.permissionsData,function(t,a){return r("li",{key:a},[r("el-checkbox",{attrs:{label:t.id,name:"permissions"}},[e._v(e._s(t.name+"("+t.slug+")"))])],1)}))])],1),e._v(" "),r("el-form-item",{attrs:{prop:"username",label:"姓名:"}},[r("el-input",{attrs:{type:"text",placeholder:"你的姓名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"iphone",label:"手机号码:"}},[r("el-input",{attrs:{type:"text",placeholder:"你的手机号码"},model:{value:e.ruleForm.iphone,callback:function(t){e.$set(e.ruleForm,"iphone",t)},expression:"ruleForm.iphone"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"btn-form-submit",on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"角色权限信息",visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("ul",{staticClass:"rolesinfo"},[r("li",[e._v("角色名称: "+e._s(e.showData.name))]),e._v(" "),r("li",[e._v("角色: "+e._s(e.showData.slug))]),e._v(" "),r("li",[e._v("角色描述: "+e._s(e.showData.description))]),e._v(" "),r("li",[e._v("角色id: "+e._s(e.showData.id))]),e._v(" "),r("li",[e._v("角色创建时间: "+e._s(e.showData.created_ay))])]),e._v(" "),e._l(e.showData.permissions,function(t,a){return[r("el-tag",{key:a,staticClass:"tags-module",attrs:{type:"primary"}},[e._v("模块: "+e._s(a))]),e._v(" "),e._l(t,function(t){return r("el-tag",{key:t.id,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(t.name))])})]}),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]}},861:function(e,t,r){var a=r(1)(r(726),r(727),!1,function(e){r(724)},"data-v-0657e983",null);e.exports=a.exports}});