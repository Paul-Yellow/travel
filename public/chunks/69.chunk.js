webpackJsonp([69],{720:function(e,r,a){var s=a(721);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(9)("65585fb0",s,!0,{})},721:function(e,r,a){(e.exports=a(5)(!1)).push([e.i,".inline-radio[data-v-0af3429e]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-ms-flex-pack:distribute;justify-content:space-around;-webkit-flex-wrap:nowrap;-webkit-justify-content:space-around;-moz-flex-direction:row;-moz-flex-wrap:nowrap;-moz-justify-content:space-around}.inline-radio>p[data-v-0af3429e]{padding:0 .6rem}.ul-list[data-v-0af3429e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-moz-flex-direction:row;-moz-flex-wrap:wrap;-moz-justify-content:flex-start;-webkit-flex-wrap:wrap;-webkit-justify-content:flex-start}.ul-list>li[data-v-0af3429e]{padding:.6rem}.tags-module[data-v-0af3429e]{display:block}.tags[data-v-0af3429e]{margin:5px}.rolesinfo[data-v-0af3429e]{padding:1rem}.rolesinfo>li[data-v-0af3429e]{padding:.8rem;border-bottom:1px solid #ccc}.rolesinfo>li>span[data-v-0af3429e]{margin-right:.6rem}",""])},722:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={name:"usercreate",data:function(){var e=this;return{rolesData:[],permissionsData:[],showData:{},dialogVisible:!1,ruleForm:{email:"",password:"",checkPass:"",sex:"",username:"",iphone:"",permissions:[],roles:1},rules:{email:[{required:!0,message:"请输入正确的账户名，账户名不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}],password:[{validator:function(r,a,s){""===a?s(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),s())},trigger:"blur"},{min:6,max:16,message:"长度在 6 到  16个字符",trigger:"blur,change"}],checkPass:[{validator:function(r,a,s){""===a?s(new Error("请再次输入密码")):a!==e.ruleForm.password?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"},{min:6,max:16,message:"长度在 6 到  16个字符",trigger:"blur,change"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],username:[{required:!0,message:"请输入你的姓名",trigger:"blur"},{min:2,max:6,message:"长度在3到6个字符之间",trigger:"blur,change"}],iphone:[{required:!0,message:"请输入你的手机号码",trigger:"blur"},{min:11,max:12,message:"长度在11到12个字符之间",trigger:"blur,change"}]}}},methods:{submitForm:function(e){var r=this,a=this.ruleForm;this.$refs[e].validate(function(e){e&&r.$http.post("/admin/users",a).then(function(e){if(200===e.status&&200===e.data.responData.status)return r.$message({type:"success",message:e.data.responData.messages}),r.$router.go(-1)})})},fetchData:function(){var e=this;this.$http.get("/admin/users/create").then(function(r){var a=r.data;a.roles.length>0&&a.permissions.length>0?(e.rolesData=a.roles,e.permissionsData=a.permissions):e.$message({type:"error",message:"空的数据"})})},onShowPermission:function(e){var r=this;this.$http.get("/admin/role/"+e).then(function(e){200===e.status&&e.data&&(r.dialogVisible=!0,r.showData=e.data.responData.results)})}},created:function(){this.fetchData()}}},723:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"card"},[a("el-form",{ref:"ruleForm",staticClass:"signup",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"email",label:"邮箱:"}},[a("el-input",{attrs:{type:"email",placeholder:"邮箱作为以后找会密码的依据"},model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password",label:"密码:"}},[a("el-input",{attrs:{type:"password",placeholder:"密码最少6位数"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"checkPass",label:"再次输入密码:"}},[a("el-input",{attrs:{type:"password",placeholder:"密码最少6位数"},model:{value:e.ruleForm.checkPass,callback:function(r){e.$set(e.ruleForm,"checkPass",r)},expression:"ruleForm.checkPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:e.ruleForm.sex,callback:function(r){e.$set(e.ruleForm,"sex",r)},expression:"ruleForm.sex"}},[a("el-radio",{attrs:{label:"先生",name:"sex"}}),e._v(" "),a("el-radio",{attrs:{label:"女士",name:"sex"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色",prop:"roles"}},[a("el-radio-group",{staticClass:"inline-radio",model:{value:e.ruleForm.roles,callback:function(r){e.$set(e.ruleForm,"roles",r)},expression:"ruleForm.roles"}},e._l(e.rolesData,function(r,s){return a("p",{key:s},[a("el-radio",{attrs:{label:r.id,name:"roles"}},[e._v(e._s(r.name))]),e._v(" "),a("el-tag",{staticStyle:{cursor:"pointer"},nativeOn:{click:function(a){e.onShowPermission(r.id)}}},[e._v("查看权限")])],1)}))],1),e._v(" "),a("el-form-item",{attrs:{label:"角色权限",prop:"permissions"}},[a("p",[e._v("为用户添加额外的权限;")]),e._v(" "),a("el-checkbox-group",{staticStyle:{border:"1px solid #eee","border-radius":"4px",padding:".8rem"},model:{value:e.ruleForm.permissions,callback:function(r){e.$set(e.ruleForm,"permissions",r)},expression:"ruleForm.permissions"}},[a("ul",{staticClass:"ul-list"},e._l(e.permissionsData,function(r,s){return a("li",{key:s},[a("el-checkbox",{attrs:{label:r.id,name:"permissions"}},[e._v(e._s(r.name+"("+r.slug+")"))])],1)}))])],1),e._v(" "),a("el-form-item",{attrs:{prop:"username",label:"姓名:"}},[a("el-input",{attrs:{type:"text",placeholder:"你的姓名"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"iphone",label:"手机号码:"}},[a("el-input",{attrs:{type:"text",placeholder:"你的手机号码"},model:{value:e.ruleForm.iphone,callback:function(r){e.$set(e.ruleForm,"iphone",r)},expression:"ruleForm.iphone"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btn-form-submit",on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("创建")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"角色权限信息",visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(r){e.dialogVisible=r}}},[a("ul",{staticClass:"rolesinfo"},[a("li",[e._v("角色名称: "+e._s(e.showData.name))]),e._v(" "),a("li",[e._v("角色: "+e._s(e.showData.slug))]),e._v(" "),a("li",[e._v("角色描述: "+e._s(e.showData.description))]),e._v(" "),a("li",[e._v("角色id: "+e._s(e.showData.id))]),e._v(" "),a("li",[e._v("角色创建时间: "+e._s(e.showData.created_ay))])]),e._v(" "),e._l(e.showData.permissions,function(r,s){return[a("el-tag",{key:s,staticClass:"tags-module",attrs:{type:"primary"}},[e._v("模块: "+e._s(s))]),e._v(" "),e._l(r,function(r){return a("el-tag",{key:r.id,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(r.name))])})]}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(r){e.dialogVisible=!1}}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]}},860:function(e,r,a){var s=a(1)(a(722),a(723),!1,function(e){a(720)},"data-v-0af3429e",null);e.exports=s.exports}});